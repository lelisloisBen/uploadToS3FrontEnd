<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File To S3</title>
</head>
<body>

    

        <label for="user_file">Upload Your File</label>
        <br></br>
        <input id="fileinput" type="file" name="user_file">
        <br></br>
        <button type="submit" onclick="onSelectFile()" >Upload</button>
   

<script>
    const input = document.getElementById('fileinput');

    const upload = (file) => {
        console.log("console.log: ", file )
        fetch('https://samir-upload.herokuapp.com/upload', {
            method: 'POST',
            mode: "cors",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({"the_file":{"name": "samir", "test": "fuck"}})
        })
        .then(
            response => response.json()
        ).then(
            success => console.log(success)
        ).catch(
            error => console.log(error)
        );
    };

    // Event handler executed when a file is selected
    const onSelectFile = () => upload(input.files[0]);

    // Add a listener on your input
    // It will be triggered when a file will be selected
    // input.addEventListener('change', onSelectFile, false);
</script>
    
</body>
</html>